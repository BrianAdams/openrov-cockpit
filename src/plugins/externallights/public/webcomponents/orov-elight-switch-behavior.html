<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../orov-behaviors/orov-behavior.html">
<link rel="import" href="../ui-manager/switch-behavior.html">
<script src="../orov-behaviors/utilities.js"></script>
<script>
(function (window) {
  'use strict';
      var switchBehaviorImpl= {
      properties: {
        index:{type:Number}
      },
      on:function(){
        this.eventEmitter.emit('plugin.externalLights.setOnOff',this.index,true)
      },
      off:function(){
        this.eventEmitter.emit('plugin.externalLights.setOnOff',this.index,false)
      },
      registerEmitterHandlers: function(emitter){
        var self = this;
        emitter.withHistory.on('plugin.externalLights.level',function(index,level){
          if (index!==self.index){
            return;
          }
          if (state.enabled){
            self.set('switchState','on')
          } else {
            self.set('switchState','off')
          }
        })
      },
      ready: function(){
        var self=this;
      }
    }

  var behaviors = namespace('behaviors');
  behaviors.oROVELightSwitch=[namespace('behaviors').oROVStandard,window.OROV.behaviors.switchBehavior,switchBehaviorImpl];

  })(window);
</script>
